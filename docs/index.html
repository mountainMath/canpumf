<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Parse StatCan PUMF files • canpumf</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Parse StatCan PUMF files">
<meta property="og:description" content="Facilitate working with StatCan Public Use Microdata Files (PUMF) Parses the SPSS Command Files to infer the layout structure, variable labels and value labels as well as missing data values.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">canpumf</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/Census.html">Census</a>
    </li>
    <li>
      <a href="articles/LFS.html">LFS</a>
    </li>
    <li>
      <a href="articles/working_with_canpumf.html">Working with canpumf</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mountainMath/canpumf/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="canpumf">canpumf<a class="anchor" aria-label="anchor" href="#canpumf"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>The goal of {canpumf} is to facilitate ingesting StatCan PUMF data in R.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the current development version of canpumf from <a href="https://github.com/mountainMath/canpumf" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"mountainmath/canpumf"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h2>
<p>Please consult the <a href="https://mountainmath.github.io/canpumf/" class="external-link">documentation and example articles</a> for further information.</p>
<p>StatCan publishes an <a href="https://www150.statcan.gc.ca/n1/en/catalogue/71-543-G" class="external-link">official guide to the Labour Force Surve</a> for different vintages of the <a href="https://www23.statcan.gc.ca/imdb/p2SV.pl?Function=getSurvey&amp;SDDS=3701" class="external-link">LFS</a>.</p>
</div>
<div class="section level2">
<h2 id="cache-path">Cache path<a class="anchor" aria-label="anchor" href="#cache-path"></a>
</h2>
<p>PUMF data can be large and should be cached locally. For this purpose users should set the options variable canpumf.cache_path to a directory where the data can be stored via <code>options(canpumf.cache_path="&lt;your local path&gt;")</code> in your <code>.Rprofile</code>, alternatively the path can be specified with every call.</p>
</div>
<div class="section level2">
<h2 id="basic-usage">Basic usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h2>
<p>Some PUMF data is available from StatCan via direct download, this data can be directly accessed via the <code><a href="reference/get_pumf.html">get_pumf()</a></code> function. In other cases, PUMF data has to be ordered via EFT and shuold be deposited in the cache directory so <code><a href="reference/get_pumf.html">get_pumf()</a></code> function can find it. The <code><a href="reference/label_pumf_data.html">label_pumf_data()</a></code> function parses metadata and labels the data with human-readable labels.</p>
</div>
<div class="section level2">
<h2 id="lfs-data">LFS data<a class="anchor" aria-label="anchor" href="#lfs-data"></a>
</h2>
<p>For LFS data, the data is orgnaized by year except for the current year where it’s organized by month. To access the data for 2022 you would use:</p>
<pre><code><span><span class="va">lfs_2022</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_pumf.html">get_pumf</a></span><span class="op">(</span><span class="st">"LFS"</span>,<span class="st">"2022"</span><span class="op">)</span></span></code></pre>
<p>This will download the 2022 LFS pumf data if needed and load it.</p>
<p>StatCan unfortunately does not provide standardized metadata for PUMF files, but the canpumf package also parses the SPSS Command Files in order to allow for automated labelling of the data. To label the data with human-readable labels use</p>
<pre><code><span><span class="va">lfs_2022_labelled</span> <span class="op">&lt;-</span> <span class="va">lfs_2022</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/label_pumf_data.html">label_pumf_data</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
<p>Sometimes for people familiar with the data the standard column names the PUMF data comes with are more convenient to work with than the long human-readable names, in this case you can use <code>label_pumf_data(rename_columns=FALSE)</code> to only label the column categories.</p>
<p>Care should be taken with identifying codes for unavailable or unapplicable data in numeric columns, these aren’t provided in machine readable format for most PUMF data and have to be handled manually. Always refer to the PUMF data dictionaries.</p>
</div>
<div class="section level2">
<h2 id="census-data">Census data<a class="anchor" aria-label="anchor" href="#census-data"></a>
</h2>
<p>The canpumf package can currently handle the Census individuals PUMF for the 1996 through 2021 censuses. These have to be ordered via EFT and places into the canpumf cache path, with a directory name equal to the original filename that data came with via EFT that contains the product identifier and census year so the package can find the data. It can then be accessed via:</p>
<pre><code><span><span class="va">pumf_2021</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_pumf.html">get_pumf</a></span><span class="op">(</span><span class="st">"Census"</span>,<span class="st">"2021"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/label_pumf_data.html">label_pumf_data</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
<p>By default the package will load the <em>individuals</em> file, the <em>hierarchical</em> is availabel for the 2006, 2011, 2016 censuses, the <em>families</em> or <em>households</em> versions are available for the 1971, 1976, 1986, 1991, 1996, and 2001 censuses.</p>
<pre><code><span><span class="va">pumf_h_2016</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_pumf.html">get_pumf</a></span><span class="op">(</span><span class="st">"Census"</span>,<span class="st">"2016 (hierarchical)"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/label_pumf_data.html">label_pumf_data</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="other-pumf">Other PUMF<a class="anchor" aria-label="anchor" href="#other-pumf"></a>
</h2>
<p>The package makes an attempt to parse other PUMF files.</p>
<p>The code may need further refinements to work with all StatCan PUMF files. It has been successfully tried with the following PUMF files:</p>
<ul>
<li>CHS 2018</li>
<li>ITS 2017</li>
<li>VTS 2018</li>
<li>TSRC 2017</li>
<li>Covid Series 3</li>
<li>SFS 2019</li>
</ul>
<div class="section level3">
<h3 id="cite-canpumf">Cite <strong>canpumf</strong>
<a class="anchor" aria-label="anchor" href="#cite-canpumf"></a>
</h3>
<p>If you wish to cite the <code>canpumf</code> package in your work:</p>
<p>von Bergmann, J. (2024), canpumf: Import StatCan PUMF data into R. v0.2.0.</p>
<p>A BibTeX entry for LaTeX users is</p>
<pre><code>  @Manual{,
    author = {Jens {von Bergmann}},
    title = {canpumf: Import StatCan PUMF data into R},
    year = {2024},
    note = {R package version 0.2.0},
    url = {https://mountainmath.github.io/canpumf/},
  }</code></pre>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/mountainMath/canpumf/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/mountainMath/canpumf/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing canpumf</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Jens von Bergmann <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Jens von Bergmann.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
