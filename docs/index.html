<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-CA">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Parse StatCan PUMF files • canpumf</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Parse StatCan PUMF files">
<meta name="description" content="Facilitate working with StatCan Public Use Microdata Files (PUMF) Parses the SPSS Command Files or other metadata to infer the layout structure, variable labels and value labels as well as missing data values.">
<meta property="og:description" content="Facilitate working with StatCan Public Use Microdata Files (PUMF) Parses the SPSS Command Files or other metadata to infer the layout structure, variable labels and value labels as well as missing data values.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">canpumf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/Census.html">Census</a></li>
    <li><a class="dropdown-item" href="articles/LFS.html">LFS</a></li>
    <li><a class="dropdown-item" href="articles/working_with_canpumf.html">Working with canpumf</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mountainMath/canpumf/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="canpumf">canpumf<a class="anchor" aria-label="anchor" href="#canpumf"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>The goal of {canpumf} is to facilitate ingesting StatCan PUMF data in R.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the current development version of canpumf from <a href="https://github.com/mountainMath/canpumf" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"mountainmath/canpumf"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h2>
<p>Please consult the <a href="https://mountainmath.github.io/canpumf/">documentation and example articles</a> for further information.</p>
<p>StatCan publishes an <a href="https://www150.statcan.gc.ca/n1/en/catalogue/71-543-G" class="external-link">official guide to the Labour Force Surve</a> for different vintages of the <a href="https://www23.statcan.gc.ca/imdb/p2SV.pl?Function=getSurvey&amp;SDDS=3701" class="external-link">LFS</a>.</p>
</div>
<div class="section level2">
<h2 id="cache-path">Cache path<a class="anchor" aria-label="anchor" href="#cache-path"></a>
</h2>
<p>PUMF data can be large and should be cached locally. For this purpose users should set the options variable canpumf.cache_path to a directory where the data can be stored via <code>options(canpumf.cache_path="&lt;your local path&gt;")</code> in your <code>.Rprofile</code>, alternatively the path can be specified with every call.</p>
</div>
<div class="section level2">
<h2 id="basic-usage">Basic usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h2>
<p>Some PUMF data is available from StatCan via direct download, this data can be directly accessed via the <code><a href="reference/get_pumf.html">get_pumf()</a></code> function. In other cases, PUMF data has to be ordered via EFT and shuold be deposited in the cache directory so <code><a href="reference/get_pumf.html">get_pumf()</a></code> function can find it. The <code><a href="reference/label_pumf_data.html">label_pumf_data()</a></code> function parses metadata and labels the data with human-readable labels.</p>
</div>
<div class="section level2">
<h2 id="lfs-data">LFS data<a class="anchor" aria-label="anchor" href="#lfs-data"></a>
</h2>
<p>For LFS data, the data is orgnaized by year except for the current year where it’s organized by month. To access the data for 2022 you would use:</p>
<pre><code><span><span class="va">lfs_2022</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_pumf.html">get_pumf</a></span><span class="op">(</span><span class="st">"LFS"</span>,<span class="st">"2022"</span><span class="op">)</span></span></code></pre>
<p>This will download the 2022 LFS pumf data if needed and load it.</p>
<p>StatCan unfortunately does not provide standardized metadata for PUMF files, but the canpumf package also parses the SPSS Command Files in order to allow for automated labelling of the data. To label the data with human-readable labels use</p>
<pre><code><span><span class="va">lfs_2022_labelled</span> <span class="op">&lt;-</span> <span class="va">lfs_2022</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/label_pumf_data.html">label_pumf_data</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
<p>Sometimes for people familiar with the data the standard column names the PUMF data comes with are more convenient to work with than the long human-readable names, in this case you can use <code>label_pumf_data(rename_columns=FALSE)</code> to only label the column categories.</p>
<p>Care should be taken with identifying codes for unavailable or unapplicable data in numeric columns, these aren’t provided in machine readable format for most PUMF data and have to be handled manually. Always refer to the PUMF data dictionaries.</p>
</div>
<div class="section level2">
<h2 id="census-data">Census data<a class="anchor" aria-label="anchor" href="#census-data"></a>
</h2>
<p>The canpumf package can currently handle the Census individuals PUMF for the 1996 through 2021 censuses. These have to be ordered via EFT and places into the canpumf cache path, with a directory name equal to the original filename that data came with via EFT that contains the product identifier and census year so the package can find the data. It can then be accessed via:</p>
<pre><code><span><span class="va">pumf_2021</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_pumf.html">get_pumf</a></span><span class="op">(</span><span class="st">"Census"</span>,<span class="st">"2021"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/label_pumf_data.html">label_pumf_data</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
<p>By default the package will load the <em>individuals</em> file, the <em>hierarchical</em> is availabel for the 2006, 2011, 2016 censuses, the <em>families</em> or <em>households</em> versions are available for the 1971, 1976, 1986, 1991, 1996, and 2001 censuses.</p>
<pre><code><span><span class="va">pumf_h_2016</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_pumf.html">get_pumf</a></span><span class="op">(</span><span class="st">"Census"</span>,<span class="st">"2016 (hierarchical)"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/label_pumf_data.html">label_pumf_data</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="other-pumf">Other PUMF<a class="anchor" aria-label="anchor" href="#other-pumf"></a>
</h2>
<p>The package makes an attempt to parse other PUMF files.</p>
<p>The code may need further refinements to work with all StatCan PUMF files. It has been successfully tried with the following PUMF files:</p>
<ul>
<li>CHS 2018, 2021, 2022</li>
<li>ITS 2017</li>
<li>VTS 2018</li>
<li>TSRC 2017</li>
<li>Covid Series 3</li>
<li>SFS 2019</li>
<li>SHS 2019</li>
</ul>
<div class="section level3">
<h3 id="cite-canpumf">Cite <strong>canpumf</strong>
<a class="anchor" aria-label="anchor" href="#cite-canpumf"></a>
</h3>
<p>If you wish to cite the <code>canpumf</code> package in your work:</p>
<p>von Bergmann, J. (2024), canpumf: Import StatCan PUMF data into R. v0.2.0.</p>
<p>A BibTeX entry for LaTeX users is</p>
<pre><code>  @Manual{,
    author = {Jens {von Bergmann}},
    title = {canpumf: Import StatCan PUMF data into R},
    year = {2024},
    note = {R package version 0.2.0},
    url = {https://mountainmath.github.io/canpumf/},
  }</code></pre>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/mountainMath/canpumf/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/mountainMath/canpumf/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing canpumf</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Jens von Bergmann <br><small class="roles"> Maintainer </small>   </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jens von Bergmann.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
